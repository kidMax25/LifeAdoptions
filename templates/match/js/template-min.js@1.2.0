/*!
 * jquery.sumoselect - v3.0.3
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2016-12-12
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */
!function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"undefined"!=typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}((function($){$.fn.SumoSelect=function(options){var settings=$.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,isClickAwayOk:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",searchFn:function(haystack,needle){return haystack.toLowerCase().indexOf(needle.toLowerCase())<0},noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1,showTitle:!0},options),ret=this.each((function(){var selObj=this;!this.sumo&&$(this).is("select")&&(this.sumo={E:$(selObj),is_multi:$(selObj).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],lastUnselected:null,createElems:function(){var O=this;O.E.wrap('<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">'),O.select=O.E.parent(),O.caption=$("<span>"),O.CaptionCont=$('<p class="CaptionCont SelectBox" ><label><i></i></label></p>').attr("style",O.E.attr("style")).prepend(O.caption),O.select.append(O.CaptionCont),O.is_multi||(settings.okCancelInMulti=!1),O.E.attr("disabled")&&O.select.addClass("disabled").removeAttr("tabindex"),settings.outputAsCSV&&O.is_multi&&O.E.attr("name")&&(O.select.append($('<input class="HEMANT123" type="hidden" />').attr("name",O.E.attr("name")).val(O.getSelStr())),O.E.removeAttr("name")),!O.isMobile()||settings.forceCustomRendering?(O.E.attr("name")&&O.select.addClass("sumo_"+O.E.attr("name").replace(/\[\]/,"")),O.E.addClass("SumoUnder").attr("tabindex","-1"),O.optDiv=$('<div class="optWrapper '+(settings.up?"up":"")+'">'),O.floatingList(),O.ul=$('<ul class="options">'),O.optDiv.append(O.ul),settings.selectAll&&O.is_multi&&O.SelAll(),settings.search&&O.Search(),O.ul.append(O.prepItems(O.E.children())),O.is_multi&&O.multiSelelect(),O.select.append(O.optDiv),O.basicEvents(),O.selAllState()):O.setNativeMobile()},prepItems:function(opts,d){var lis=[],O=this;return $(opts).each((function(i,opt){opt=$(opt),lis.push(opt.is("optgroup")?$('<li class="group '+(opt[0].disabled?"disabled":"")+'"><label>'+opt.attr("label")+"</label><ul></ul></li>").find("ul").append(O.prepItems(opt.children(),opt[0].disabled)).end():O.createLi(opt,d))})),lis},createLi:function(opt,d){opt.attr("value")||opt.attr("value",opt.val());var li=$('<li class="opt"><label>'+opt.text()+"</label></li>");return li.data("opt",opt),opt.data("li",li),this.is_multi&&li.prepend("<span><i></i></span>"),(opt[0].disabled||d)&&(li=li.addClass("disabled")),this.onOptClick(li),opt[0].selected&&li.addClass("selected"),opt.attr("class")&&li.addClass(opt.attr("class")),opt.attr("title")&&li.attr("title",opt.attr("title")),li},getSelStr:function(){var sopt=[];return this.E.find("option:selected").each((function(){sopt.push($(this).val())})),sopt.join(settings.csvSepChar)},multiSelelect:function(){var O=this;O.optDiv.addClass("multiple"),O.okbtn=$('<p tabindex="0" class="btnOk">'+settings.locale[0]+"</p>").click((function(){O._okbtn(),O.hideOpts()})),O.cancelBtn=$('<p tabindex="0" class="btnCancel">'+settings.locale[1]+"</p>").click((function(){O._cnbtn(),O.hideOpts()}));var btns=O.okbtn.add(O.cancelBtn);O.optDiv.append($('<div class="MultiControls">').append(btns)),btns.on("keydown.sumo",(function(e){var el=$(this);switch(e.which){case 32:case 13:el.trigger("click");break;case 9:if(el.hasClass("btnOk"))return;case 27:return O._cnbtn(),void O.hideOpts()}e.stopPropagation(),e.preventDefault()}))},_okbtn:function(){var O=this,cg=0;settings.triggerChangeCombined&&(O.E.find("option:selected").length!==O.Pstate.length?cg=1:O.E.find("option").each((function(i,e){e.selected&&O.Pstate.indexOf(i)<0&&(cg=1)})),cg&&(O.callChange(),O.setText()))},_cnbtn:function(){var O=this;O.E.find("option:selected").each((function(){this.selected=!1})),O.optDiv.find("li.selected").removeClass("selected");for(var i=0;i<O.Pstate.length;i++)O.E.find("option")[O.Pstate[i]].selected=!0,O.ul.find("li.opt").eq(O.Pstate[i]).addClass("selected");O.selAllState()},SelAll:function(){var O=this;O.is_multi&&(O.selAll=$('<p class="select-all"><span><i></i></span><label>'+settings.locale[2]+"</label></p>"),O.optDiv.addClass("selall"),O.selAll.on("click",(function(){O.selAll.toggleClass("selected"),O.toggSelAll(O.selAll.hasClass("selected"),1)})),O.optDiv.prepend(O.selAll))},Search:function(){var O=this,cc=O.CaptionCont.addClass("search"),P=$('<p class="no-match">'),fn=options.searchFn&&"function"==typeof options.searchFn?options.searchFn:settings.searchFn;O.ftxt=$('<input type="text" class="search-txt" value="" placeholder="'+settings.searchText+'">').on("click",(function(e){e.stopPropagation()})),cc.append(O.ftxt),O.optDiv.children("ul").after(P),O.ftxt.on("keyup.sumo",(function(){var hid=O.optDiv.find("ul.options li.opt").each((function(ix,e){var opt=(e=$(e)).data("opt")[0];opt.hidden=fn(e.text(),O.ftxt.val()),e.toggleClass("hidden",opt.hidden)})).not(".hidden");P.html(settings.noMatch.replace(/\{0\}/g,"<em></em>")).toggle(!hid.length),P.find("em").text(O.ftxt.val()),O.selAllState()}))},selAllState:function(){var O=this;if(settings.selectAll&&O.is_multi){var sc=0,vc=0;O.optDiv.find("li.opt").not(".hidden").each((function(ix,e){$(e).hasClass("selected")&&sc++,$(e).hasClass("disabled")||vc++})),sc===vc?O.selAll.removeClass("partial").addClass("selected"):0===sc?O.selAll.removeClass("selected partial"):O.selAll.addClass("partial")}},showOpts:function(){var O=this;if(!O.E.attr("disabled")){if(O.E.trigger("sumo:opening",O),O.is_opened=!0,O.select.addClass("open").attr("aria-expanded","true"),O.E.trigger("sumo:opened",O),O.ftxt?O.ftxt.focus():O.select.focus(),$(document).on("click.sumo",(function(e){if(!O.select.is(e.target)&&0===O.select.has(e.target).length){if(!O.is_opened)return;O.hideOpts(),settings.okCancelInMulti&&(settings.isClickAwayOk?O._okbtn():O._cnbtn())}})),O.is_floating){var H=O.optDiv.children("ul").outerHeight()+2;O.is_multi&&(H+=parseInt(O.optDiv.css("padding-bottom"))),O.optDiv.css("height",H),$("body").addClass("sumoStopScroll")}O.setPstate()}},setPstate:function(){var O=this;O.is_multi&&(O.is_floating||settings.okCancelInMulti)&&(O.Pstate=[],O.E.find("option").each((function(i,e){e.selected&&O.Pstate.push(i)})))},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var O=this;O.is_opened&&(O.E.trigger("sumo:closing",O),O.is_opened=!1,O.select.removeClass("open").attr("aria-expanded","true").find("ul li.sel").removeClass("sel"),O.E.trigger("sumo:closed",O),$(document).off("click.sumo"),O.select.focus(),$("body").removeClass("sumoStopScroll"),settings.search&&(O.ftxt.val(""),O.ftxt.trigger("keyup.sumo")))},setOnOpen:function(){var O=this,li=O.optDiv.find("li.opt:not(.hidden)").eq(settings.search?0:O.E[0].selectedIndex);li.hasClass("disabled")&&!(li=li.next(":not(disabled)")).length||(O.optDiv.find("li.sel").removeClass("sel"),li.addClass("sel"),O.showOpts())},nav:function(up){var c,O=this,s=O.ul.find("li.opt:not(.disabled, .hidden)"),sel=O.ul.find("li.opt.sel:not(.hidden)"),idx=s.index(sel);if(O.is_opened&&sel.length){if(up&&idx>0)c=s.eq(idx-1);else{if(!(!up&&idx<s.length-1&&idx>-1))return;c=s.eq(idx+1)}sel.removeClass("sel"),sel=c.addClass("sel");var ul=O.ul,st=ul.scrollTop(),t=sel.position().top+st;t>=st+ul.height()-sel.outerHeight()&&ul.scrollTop(t-ul.height()+sel.outerHeight()),t<st&&ul.scrollTop(t)}else O.setOnOpen()},basicEvents:function(){var O=this;O.CaptionCont.click((function(evt){O.E.trigger("click"),O.is_opened?O.hideOpts():O.showOpts(),evt.stopPropagation()})),O.select.on("keydown.sumo",(function(e){switch(e.which){case 38:O.nav(!0);break;case 40:O.nav(!1);break;case 65:if(O.is_multi&&e.ctrlKey){O.toggSelAll(!e.shiftKey,1);break}return;case 32:if(settings.search&&O.ftxt.is(e.target))return;case 13:O.is_opened?O.optDiv.find("ul li.sel").trigger("click"):O.setOnOpen();break;case 9:return void(settings.okCancelInMulti||O.hideOpts());case 27:return settings.okCancelInMulti&&O._cnbtn(),void O.hideOpts();default:return}e.preventDefault()})),$(window).on("resize.sumo",(function(){O.floatingList()}))},onOptClick:function(li){var O=this;li.click((function(){var li=$(this);if(!li.hasClass("disabled")){O.is_multi?(li.toggleClass("selected"),li.data("opt")[0].selected=li.hasClass("selected"),!1===li.data("opt")[0].selected&&(O.lastUnselected=li.data("opt")[0].textContent),O.selAllState()):(li.parent().find("li.selected").removeClass("selected"),li.toggleClass("selected"),li.data("opt")[0].selected=!0),O.is_multi&&settings.triggerChangeCombined&&(O.is_floating||settings.okCancelInMulti)||(O.setText(),O.callChange()),O.is_multi||O.hideOpts()}}))},setText:function(){var O=this;if(O.placeholder="",O.is_multi){for(var sels=O.E.find(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i+1>=settings.csvDispCount&&settings.csvDispCount){sels.length===O.E.find("option").length&&settings.captionFormatAllSelected?O.placeholder=settings.captionFormatAllSelected.replace(/\{0\}/g,sels.length)+",":O.placeholder=settings.captionFormat.replace(/\{0\}/g,sels.length)+",";break}O.placeholder+=$(sels[i]).text()+", "}O.placeholder=O.placeholder.replace(/,([^,]*)$/,"$1")}else O.placeholder=O.E.find(":selected").not(":disabled").text();var is_placeholder=!1;O.placeholder||(is_placeholder=!0,O.placeholder=O.E.attr("placeholder"),O.placeholder||(O.placeholder=O.E.find("option:disabled:selected").text())),O.placeholder=O.placeholder?settings.prefix+" "+O.placeholder:settings.placeholder,O.caption.html(O.placeholder),settings.showTitle&&O.CaptionCont.attr("title",O.placeholder);var csvField=O.select.find("input.HEMANT123");return csvField.length&&csvField.val(O.getSelStr()),is_placeholder?O.caption.addClass("placeholder"):O.caption.removeClass("placeholder"),O.placeholder},isMobile:function(){for(var ua=navigator.userAgent||navigator.vendor||window.opera,i=0;i<settings.nativeOnDevice.length;i++)if(ua.toString().toLowerCase().indexOf(settings.nativeOnDevice[i].toLowerCase())>0)return settings.nativeOnDevice[i];return!1},setNativeMobile:function(){var O=this;O.E.addClass("SelectClass"),O.mob=!0,O.E.change((function(){O.setText()}))},floatingList:function(){var O=this;O.is_floating=$(window).width()<=settings.floatWidth,O.optDiv.toggleClass("isFloating",O.is_floating),O.is_floating||O.optDiv.css("height",""),O.optDiv.toggleClass("okCancelInMulti",settings.okCancelInMulti&&!O.is_floating)},vRange:function(i){if(this.E.find("option").length<=i||i<0)throw"index out of bounds";return this},toggSel:function(c,i){var opt,O=this;"number"==typeof i?(O.vRange(i),opt=O.E.find("option")[i]):opt=O.E.find('option[value="'+i+'"]')[0]||0,opt&&!opt.disabled&&opt.selected!==c&&(opt.selected=c,O.mob||$(opt).data("li").toggleClass("selected",c),O.callChange(),O.setPstate(),O.setText(),O.selAllState())},toggDis:function(c,i){var O=this.vRange(i);O.E.find("option")[i].disabled=c,c&&(O.E.find("option")[i].selected=!1),O.mob||O.optDiv.find("ul.options li").eq(i).toggleClass("disabled",c).removeClass("selected"),O.setText()},toggSumo:function(val){var O=this;return O.enabled=val,O.select.toggleClass("disabled",val),val?(O.E.attr("disabled","disabled"),O.select.removeAttr("tabindex")):(O.E.removeAttr("disabled"),O.select.attr("tabindex","0")),O},toggSelAll:function(c,direct){var O=this;O.E.find("option:not(:disabled,:hidden)").each((function(ix,e){var is_selected=e.selected;(e=$(e).data("li")).hasClass("hidden")||(c?is_selected||e.trigger("click"):is_selected&&e.trigger("click"))})),direct||(!O.mob&&O.selAll&&O.selAll.removeClass("partial").toggleClass("selected",!!c),O.callChange(),O.setText(),O.setPstate())},reload:function(){var elm=this.unload();return $(elm).SumoSelect(settings)},unload:function(){var O=this;return O.select.before(O.E),O.E.show(),settings.outputAsCSV&&O.is_multi&&O.select.find("input.HEMANT123").length&&O.E.attr("name",O.select.find("input.HEMANT123").attr("name")),O.select.remove(),delete selObj.sumo,selObj},add:function(val,txt,i){if(void 0===val)throw"No value to add";var O=this,opts=O.E.find("option");"number"==typeof txt&&(i=txt,txt=val),void 0===txt&&(txt=val);var opt=$("<option></option>").val(val).html(txt);if(opts.length<i)throw"index out of bounds";return void 0===i||opts.length===i?(O.E.append(opt),O.mob||O.ul.append(O.createLi(opt))):(opts.eq(i).before(opt),O.mob||O.ul.find("li.opt").eq(i).before(O.createLi(opt))),selObj},remove:function(i){var O=this.vRange(i);O.E.find("option").eq(i).remove(),O.mob||O.optDiv.find("ul.options li").eq(i).remove(),O.setText()},removeAll:function(){for(var options=this.E.find("option"),x=options.length-1;x>=0;x--)!0!==options[x].selected&&this.remove(x)},find:function(val){var options=this.E.find("option");for(var x in options)if(options[x].value===val)return parseInt(x);return-1},selectItem:function(i){this.toggSel(!0,i)},unSelectItem:function(i){this.toggSel(!1,i)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(i){this.toggDis(!0,i)},enableItem:function(i){this.toggDis(!1,i)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var O=this;return O.createElems(),O.setText(),O}},selObj.sumo.init())}));return 1===ret.length?ret[0]:ret}})),
/*!
 * Datepicker v1.0.7
 * https://fengyuanchen.github.io/datepicker
 *
 * Copyright 2014-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-02-19T12:18:04.827Z
 */
function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],factory):factory((global=global||self).jQuery)}(this,(function($){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}$=$&&$.hasOwnProperty("default")?$.default:$;var DEFAULTS={autoShow:!1,autoHide:!1,autoPick:!1,inline:!1,container:null,trigger:null,language:"",format:"mm/dd/yyyy",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",highlightedClass:"highlighted",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},IS_BROWSER="undefined"!=typeof window,WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=!!IS_BROWSER&&"ontouchstart"in WINDOW.document.documentElement,NAMESPACE="datepicker",EVENT_CLICK="click.".concat(NAMESPACE),EVENT_FOCUS="focus.".concat(NAMESPACE),EVENT_HIDE="hide.".concat(NAMESPACE),EVENT_KEYUP="keyup.".concat(NAMESPACE),EVENT_PICK="pick.".concat(NAMESPACE),EVENT_RESIZE="resize.".concat(NAMESPACE),EVENT_SCROLL="scroll.".concat(NAMESPACE),EVENT_SHOW="show.".concat(NAMESPACE),EVENT_TOUCH_START="touchstart.".concat(NAMESPACE),CLASS_HIDE="".concat(NAMESPACE,"-hide"),LANGUAGES={},VIEWS_DAYS=0,VIEWS_MONTHS=1,VIEWS_YEARS=2,toString=Object.prototype.toString;function isString(value){return"string"==typeof value}var isNaN=Number.isNaN||WINDOW.isNaN;function isNumber(value){return"number"==typeof value&&!isNaN(value)}function isUndefined(value){return void 0===value}function isDate(value){return"date"===(obj=value,toString.call(obj).slice(8,-1).toLowerCase())&&!isNaN(value.getTime());var obj}function proxy(fn,context){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];return function(){for(var _len2=arguments.length,args2=new Array(_len2),_key2=0;_key2<_len2;_key2++)args2[_key2]=arguments[_key2];return fn.apply(context,args.concat(args2))}}function selectorOf(view){return'[data-view="'.concat(view,'"]')}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}function getDaysInMonth(year,month){return[31,isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]}function getMinDay(year,month,day){return Math.min(day,getDaysInMonth(year,month))}var formatParts=/(y|m|d)+/g;function addLeadingZero(value){var length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,str=String(Math.abs(value)),i=str.length,result="";for(value<0&&(result+="-");i<length;)i+=1,result+="0";return result+str}var REGEXP_DIGITS=/\d+/g,methods={show:function(){this.built||this.build(),this.shown||this.trigger(EVENT_SHOW).isDefaultPrevented()||(this.shown=!0,this.$picker.removeClass(CLASS_HIDE).on(EVENT_CLICK,$.proxy(this.click,this)),this.showView(this.options.startView),this.inline||(this.$scrollParent.on(EVENT_SCROLL,$.proxy(this.place,this)),$(window).on(EVENT_RESIZE,this.onResize=proxy(this.place,this)),$(document).on(EVENT_CLICK,this.onGlobalClick=proxy(this.globalClick,this)),$(document).on(EVENT_KEYUP,this.onGlobalKeyup=proxy(this.globalKeyup,this)),IS_TOUCH_DEVICE&&$(document).on(EVENT_TOUCH_START,this.onTouchStart=proxy(this.touchstart,this)),this.place()))},hide:function(){this.shown&&(this.trigger(EVENT_HIDE).isDefaultPrevented()||(this.shown=!1,this.$picker.addClass(CLASS_HIDE).off(EVENT_CLICK,this.click),this.inline||(this.$scrollParent.off(EVENT_SCROLL,this.place),$(window).off(EVENT_RESIZE,this.onResize),$(document).off(EVENT_CLICK,this.onGlobalClick),$(document).off(EVENT_KEYUP,this.onGlobalKeyup),IS_TOUCH_DEVICE&&$(document).off(EVENT_TOUCH_START,this.onTouchStart))))},toggle:function(){this.shown?this.hide():this.show()},update:function(){var value=this.getValue();value!==this.oldValue&&(this.setDate(value,!0),this.oldValue=value)},pick:function(_view){var $this=this.$element,date=this.date;this.trigger(EVENT_PICK,{view:_view||"",date:date}).isDefaultPrevented()||(date=this.formatDate(this.date),this.setValue(date),this.isInput&&($this.trigger("input"),$this.trigger("change")))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.shown&&this.showView(this.options.startView)},getMonthName:function(month,shortForm){var options=this.options,monthsShort=options.monthsShort,months=options.months;return $.isNumeric(month)?month=Number(month):isUndefined(shortForm)&&(shortForm=month),!0===shortForm&&(months=monthsShort),months[isNumber(month)?month:this.date.getMonth()]},getDayName:function(day,shortForm,min){var options=this.options,days=options.days;return $.isNumeric(day)?day=Number(day):(isUndefined(min)&&(min=shortForm),isUndefined(shortForm)&&(shortForm=day)),min?days=options.daysMin:shortForm&&(days=options.daysShort),days[isNumber(day)?day:this.date.getDay()]},getDate:function(formatted){var date=this.date;return formatted?this.formatDate(date):new Date(date)},setDate:function(date,_updated){var filter=this.options.filter;if(isDate(date)||isString(date)){if(date=this.parseDate(date),$.isFunction(filter)&&!1===filter.call(this.$element,date,"day"))return;this.date=date,this.viewDate=new Date(date),_updated||this.pick(),this.built&&this.render()}},setStartDate:function(date){isDate(date)||isString(date)?this.startDate=this.parseDate(date):this.startDate=null,this.built&&this.render()},setEndDate:function(date){isDate(date)||isString(date)?this.endDate=this.parseDate(date):this.endDate=null,this.built&&this.render()},parseDate:function(date){var format=this.format,parts=[];return isDate(date)||(isString(date)&&(parts=date.match(REGEXP_DIGITS)||[]),isDate(date=date?new Date(date):new Date)||(date=new Date),parts.length===format.parts.length&&$.each(parts,(function(i,part){var value=parseInt(part,10);switch(format.parts[i]){case"dd":case"d":date.setDate(value);break;case"mm":case"m":date.setMonth(value-1);break;case"yy":date.setFullYear(2e3+value);break;case"yyyy":date.setFullYear(2===part.length?2e3+value:value)}}))),new Date(date.getFullYear(),date.getMonth(),date.getDate())},formatDate:function(date){var format=this.format,formatted="";if(isDate(date)){var year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),values={d:day,dd:addLeadingZero(day,2),m:month+1,mm:addLeadingZero(month+1,2),yy:String(year).substring(2),yyyy:addLeadingZero(year,4)};formatted=format.source,$.each(format.parts,(function(i,part){formatted=formatted.replace(part,values[part])}))}return formatted},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(NAMESPACE)}},handlers={click:function(e){var $target=$(e.target),options=this.options,date=this.date,viewDate=this.viewDate,format=this.format;if(e.stopPropagation(),e.preventDefault(),!$target.hasClass("disabled")){var view=$target.data("view"),viewYear=viewDate.getFullYear(),viewMonth=viewDate.getMonth(),viewDay=viewDate.getDate();switch(view){case"years prev":case"years next":viewYear="years prev"===view?viewYear-10:viewYear+10,viewDate.setFullYear(viewYear),viewDate.setDate(getMinDay(viewYear,viewMonth,viewDay)),this.renderYears();break;case"year prev":case"year next":viewYear="year prev"===view?viewYear-1:viewYear+1,viewDate.setFullYear(viewYear),viewDate.setDate(getMinDay(viewYear,viewMonth,viewDay)),this.renderMonths();break;case"year current":format.hasYear&&this.showView(VIEWS_YEARS);break;case"year picked":format.hasMonth?this.showView(VIEWS_MONTHS):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("year");break;case"year":viewYear=parseInt($target.text(),10),date.setDate(getMinDay(viewYear,viewMonth,viewDay)),date.setFullYear(viewYear),viewDate.setDate(getMinDay(viewYear,viewMonth,viewDay)),viewDate.setFullYear(viewYear),format.hasMonth?this.showView(VIEWS_MONTHS):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("year");break;case"month prev":case"month next":(viewMonth="month prev"===view?viewMonth-1:viewMonth+1)<0?(viewYear-=1,viewMonth+=12):viewMonth>11&&(viewYear+=1,viewMonth-=12),viewDate.setFullYear(viewYear),viewDate.setDate(getMinDay(viewYear,viewMonth,viewDay)),viewDate.setMonth(viewMonth),this.renderDays();break;case"month current":format.hasMonth&&this.showView(VIEWS_MONTHS);break;case"month picked":format.hasDay?this.showView(VIEWS_DAYS):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("month");break;case"month":viewMonth=$.inArray($target.text(),options.monthsShort),date.setFullYear(viewYear),date.setDate(getMinDay(viewYear,viewMonth,viewDay)),date.setMonth(viewMonth),viewDate.setFullYear(viewYear),viewDate.setDate(getMinDay(viewYear,viewMonth,viewDay)),viewDate.setMonth(viewMonth),format.hasDay?this.showView(VIEWS_DAYS):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("month");break;case"day prev":case"day next":case"day":"day prev"===view?viewMonth-=1:"day next"===view&&(viewMonth+=1),viewDay=parseInt($target.text(),10),date.setDate(1),date.setFullYear(viewYear),date.setMonth(viewMonth),date.setDate(viewDay),viewDate.setDate(1),viewDate.setFullYear(viewYear),viewDate.setMonth(viewMonth),viewDate.setDate(viewDay),this.renderDays(),"day"===view&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}}},globalClick:function(_ref){for(var target=_ref.target,element=this.element,trigger=this.$trigger[0],hidden=!0;target!==document;){if(target===trigger||target===element){hidden=!1;break}target=target.parentNode}hidden&&this.hide()},keyup:function(){this.update()},globalKeyup:function(_ref2){var target=_ref2.target,key=_ref2.key,keyCode=_ref2.keyCode;this.isInput&&target!==this.element&&this.shown&&("Tab"===key||9===keyCode)&&this.hide()},touchstart:function(_ref3){var target=_ref3.target;this.isInput&&target!==this.element&&!$.contains(this.$picker[0],target)&&(this.hide(),this.element.blur())}},render={render:function(){this.renderYears(),this.renderMonths(),this.renderDays()},renderWeek:function(){var _this=this,items=[],_this$options=this.options,weekStart=_this$options.weekStart,daysMin=_this$options.daysMin;weekStart=parseInt(weekStart,10)%7,daysMin=daysMin.slice(weekStart).concat(daysMin.slice(0,weekStart)),$.each(daysMin,(function(i,day){items.push(_this.createItem({text:day}))})),this.$week.html(items.join(""))},renderYears:function(){var i,options=this.options,startDate=this.startDate,endDate=this.endDate,disabledClass=options.disabledClass,filter=options.filter,yearSuffix=options.yearSuffix,viewYear=this.viewDate.getFullYear(),thisYear=(new Date).getFullYear(),year=this.date.getFullYear(),items=[],prevDisabled=!1,nextDisabled=!1;for(i=-5;i<=6;i+=1){var date=new Date(viewYear+i,1,1),disabled=!1;startDate&&(disabled=date.getFullYear()<startDate.getFullYear(),-5===i&&(prevDisabled=disabled)),!disabled&&endDate&&(disabled=date.getFullYear()>endDate.getFullYear(),6===i&&(nextDisabled=disabled)),!disabled&&filter&&(disabled=!1===filter.call(this.$element,date,"year"));var picked=viewYear+i===year,view=picked?"year picked":"year";items.push(this.createItem({picked:picked,disabled:disabled,text:viewYear+i,view:disabled?"year disabled":view,highlighted:date.getFullYear()===thisYear}))}this.$yearsPrev.toggleClass(disabledClass,prevDisabled),this.$yearsNext.toggleClass(disabledClass,nextDisabled),this.$yearsCurrent.toggleClass(disabledClass,!0).html("".concat(viewYear+-5+yearSuffix," - ").concat(viewYear+6).concat(yearSuffix)),this.$years.html(items.join(""))},renderMonths:function(){var i,options=this.options,startDate=this.startDate,endDate=this.endDate,viewDate=this.viewDate,disabledClass=options.disabledClass||"",months=options.monthsShort,filter=$.isFunction(options.filter)&&options.filter,viewYear=viewDate.getFullYear(),now=new Date,thisYear=now.getFullYear(),thisMonth=now.getMonth(),year=this.date.getFullYear(),month=this.date.getMonth(),items=[],prevDisabled=!1,nextDisabled=!1;for(i=0;i<=11;i+=1){var date=new Date(viewYear,i,1),disabled=!1;startDate&&(disabled=(prevDisabled=date.getFullYear()===startDate.getFullYear())&&date.getMonth()<startDate.getMonth()),!disabled&&endDate&&(disabled=(nextDisabled=date.getFullYear()===endDate.getFullYear())&&date.getMonth()>endDate.getMonth()),!disabled&&filter&&(disabled=!1===filter.call(this.$element,date,"month"));var picked=viewYear===year&&i===month,view=picked?"month picked":"month";items.push(this.createItem({disabled:disabled,picked:picked,highlighted:viewYear===thisYear&&date.getMonth()===thisMonth,index:i,text:months[i],view:disabled?"month disabled":view}))}this.$yearPrev.toggleClass(disabledClass,prevDisabled),this.$yearNext.toggleClass(disabledClass,nextDisabled),this.$yearCurrent.toggleClass(disabledClass,prevDisabled&&nextDisabled).html(viewYear+options.yearSuffix||""),this.$months.html(items.join(""))},renderDays:function(){var length,i,n,$element=this.$element,options=this.options,startDate=this.startDate,endDate=this.endDate,viewDate=this.viewDate,currentDate=this.date,disabledClass=options.disabledClass,filter=options.filter,months=options.months,weekStart=options.weekStart,yearSuffix=options.yearSuffix,viewYear=viewDate.getFullYear(),viewMonth=viewDate.getMonth(),now=new Date,thisYear=now.getFullYear(),thisMonth=now.getMonth(),thisDay=now.getDate(),year=currentDate.getFullYear(),month=currentDate.getMonth(),day=currentDate.getDate(),prevItems=[],prevViewYear=viewYear,prevViewMonth=viewMonth,prevDisabled=!1;0===viewMonth?(prevViewYear-=1,prevViewMonth=11):prevViewMonth-=1,length=getDaysInMonth(prevViewYear,prevViewMonth);var firstDay=new Date(viewYear,viewMonth,1);for((n=firstDay.getDay()-parseInt(weekStart,10)%7)<=0&&(n+=7),startDate&&(prevDisabled=firstDay.getTime()<=startDate.getTime()),i=length-(n-1);i<=length;i+=1){var prevViewDate=new Date(prevViewYear,prevViewMonth,i),disabled=!1;startDate&&(disabled=prevViewDate.getTime()<startDate.getTime()),!disabled&&filter&&(disabled=!1===filter.call($element,prevViewDate,"day")),prevItems.push(this.createItem({disabled:disabled,highlighted:prevViewYear===thisYear&&prevViewMonth===thisMonth&&prevViewDate.getDate()===thisDay,muted:!0,picked:prevViewYear===year&&prevViewMonth===month&&i===day,text:i,view:"day prev"}))}var nextItems=[],nextViewYear=viewYear,nextViewMonth=viewMonth,nextDisabled=!1;11===viewMonth?(nextViewYear+=1,nextViewMonth=0):nextViewMonth+=1,length=getDaysInMonth(viewYear,viewMonth),n=42-(prevItems.length+length);var lastDate=new Date(viewYear,viewMonth,length);for(endDate&&(nextDisabled=lastDate.getTime()>=endDate.getTime()),i=1;i<=n;i+=1){var date=new Date(nextViewYear,nextViewMonth,i),picked=nextViewYear===year&&nextViewMonth===month&&i===day,_disabled=!1;endDate&&(_disabled=date.getTime()>endDate.getTime()),!_disabled&&filter&&(_disabled=!1===filter.call($element,date,"day")),nextItems.push(this.createItem({disabled:_disabled,picked:picked,highlighted:nextViewYear===thisYear&&nextViewMonth===thisMonth&&date.getDate()===thisDay,muted:!0,text:i,view:"day next"}))}var items=[];for(i=1;i<=length;i+=1){var _date=new Date(viewYear,viewMonth,i),_disabled2=!1;startDate&&(_disabled2=_date.getTime()<startDate.getTime()),!_disabled2&&endDate&&(_disabled2=_date.getTime()>endDate.getTime()),!_disabled2&&filter&&(_disabled2=!1===filter.call($element,_date,"day"));var _picked=viewYear===year&&viewMonth===month&&i===day,view=_picked?"day picked":"day";items.push(this.createItem({disabled:_disabled2,picked:_picked,highlighted:viewYear===thisYear&&viewMonth===thisMonth&&_date.getDate()===thisDay,text:i,view:_disabled2?"day disabled":view}))}this.$monthPrev.toggleClass(disabledClass,prevDisabled),this.$monthNext.toggleClass(disabledClass,nextDisabled),this.$monthCurrent.toggleClass(disabledClass,prevDisabled&&nextDisabled).html(options.yearFirst?"".concat(viewYear+yearSuffix," ").concat(months[viewMonth]):"".concat(months[viewMonth]," ").concat(viewYear).concat(yearSuffix)),this.$days.html(prevItems.join("")+items.join("")+nextItems.join(""))}},CLASS_TOP_LEFT="".concat(NAMESPACE,"-top-left"),CLASS_TOP_RIGHT="".concat(NAMESPACE,"-top-right"),CLASS_BOTTOM_LEFT="".concat(NAMESPACE,"-bottom-left"),CLASS_BOTTOM_RIGHT="".concat(NAMESPACE,"-bottom-right"),CLASS_PLACEMENTS=[CLASS_TOP_LEFT,CLASS_TOP_RIGHT,CLASS_BOTTOM_LEFT,CLASS_BOTTOM_RIGHT].join(" "),Datepicker=function(){function Datepicker(element){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Datepicker),this.$element=$(element),this.element=element,this.options=$.extend({},DEFAULTS,LANGUAGES[options.language],$.isPlainObject(options)&&options),this.$scrollParent=function(element){var includeHidden=arguments.length>1&&void 0!==arguments[1]&&arguments[1],$element=$(element),position=$element.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/auto|scroll|hidden/:/auto|scroll/,scrollParent=$element.parents().filter((function(index,parent){var $parent=$(parent);return(!excludeStaticParent||"static"!==$parent.css("position"))&&overflowRegex.test($parent.css("overflow")+$parent.css("overflow-y")+$parent.css("overflow-x"))})).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(element.ownerDocument||document)}(element,!0),this.built=!1,this.shown=!1,this.isInput=!1,this.inline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}var Constructor,protoProps,staticProps;return Constructor=Datepicker,protoProps=[{key:"init",value:function(){var $this=this.$element,options=this.options,startDate=options.startDate,endDate=options.endDate,date=options.date;this.$trigger=$(options.trigger),this.isInput=$this.is("input")||$this.is("textarea"),this.inline=options.inline&&(options.container||!this.isInput),this.format=function(format){var source=String(format).toLowerCase(),parts=source.match(formatParts);if(!parts||0===parts.length)throw new Error("Invalid date format.");return format={source:source,parts:parts},$.each(parts,(function(i,part){switch(part){case"dd":case"d":format.hasDay=!0;break;case"mm":case"m":format.hasMonth=!0;break;case"yyyy":case"yy":format.hasYear=!0}})),format}(options.format);var initialValue=this.getValue();this.initialValue=initialValue,this.oldValue=initialValue,date=this.parseDate(date||initialValue),startDate&&(startDate=this.parseDate(startDate),date.getTime()<startDate.getTime()&&(date=new Date(startDate)),this.startDate=startDate),endDate&&(endDate=this.parseDate(endDate),startDate&&endDate.getTime()<startDate.getTime()&&(endDate=new Date(startDate)),date.getTime()>endDate.getTime()&&(date=new Date(endDate)),this.endDate=endDate),this.date=date,this.viewDate=new Date(date),this.initialDate=new Date(this.date),this.bind(),(options.autoShow||this.inline)&&this.show(),options.autoPick&&this.pick()}},{key:"build",value:function(){if(!this.built){this.built=!0;var $this=this.$element,options=this.options,$picker=$(options.template);this.$picker=$picker,this.$week=$picker.find(selectorOf("week")),this.$yearsPicker=$picker.find(selectorOf("years picker")),this.$yearsPrev=$picker.find(selectorOf("years prev")),this.$yearsNext=$picker.find(selectorOf("years next")),this.$yearsCurrent=$picker.find(selectorOf("years current")),this.$years=$picker.find(selectorOf("years")),this.$monthsPicker=$picker.find(selectorOf("months picker")),this.$yearPrev=$picker.find(selectorOf("year prev")),this.$yearNext=$picker.find(selectorOf("year next")),this.$yearCurrent=$picker.find(selectorOf("year current")),this.$months=$picker.find(selectorOf("months")),this.$daysPicker=$picker.find(selectorOf("days picker")),this.$monthPrev=$picker.find(selectorOf("month prev")),this.$monthNext=$picker.find(selectorOf("month next")),this.$monthCurrent=$picker.find(selectorOf("month current")),this.$days=$picker.find(selectorOf("days")),this.inline?$(options.container||$this).append($picker.addClass("".concat(NAMESPACE,"-inline"))):($(document.body).append($picker.addClass("".concat(NAMESPACE,"-dropdown"))),$picker.addClass(CLASS_HIDE).css({zIndex:parseInt(options.zIndex,10)})),this.renderWeek()}}},{key:"unbuild",value:function(){this.built&&(this.built=!1,this.$picker.remove())}},{key:"bind",value:function(){var options=this.options,$this=this.$element;$.isFunction(options.show)&&$this.on(EVENT_SHOW,options.show),$.isFunction(options.hide)&&$this.on(EVENT_HIDE,options.hide),$.isFunction(options.pick)&&$this.on(EVENT_PICK,options.pick),this.isInput&&$this.on(EVENT_KEYUP,$.proxy(this.keyup,this)),this.inline||(options.trigger?this.$trigger.on(EVENT_CLICK,$.proxy(this.toggle,this)):this.isInput?$this.on(EVENT_FOCUS,$.proxy(this.show,this)):$this.on(EVENT_CLICK,$.proxy(this.show,this)))}},{key:"unbind",value:function(){var $this=this.$element,options=this.options;$.isFunction(options.show)&&$this.off(EVENT_SHOW,options.show),$.isFunction(options.hide)&&$this.off(EVENT_HIDE,options.hide),$.isFunction(options.pick)&&$this.off(EVENT_PICK,options.pick),this.isInput&&$this.off(EVENT_KEYUP,this.keyup),this.inline||(options.trigger?this.$trigger.off(EVENT_CLICK,this.toggle):this.isInput?$this.off(EVENT_FOCUS,this.show):$this.off(EVENT_CLICK,this.show))}},{key:"showView",value:function(view){var $yearsPicker=this.$yearsPicker,$monthsPicker=this.$monthsPicker,$daysPicker=this.$daysPicker,format=this.format;if(format.hasYear||format.hasMonth||format.hasDay)switch(Number(view)){case VIEWS_YEARS:$monthsPicker.addClass(CLASS_HIDE),$daysPicker.addClass(CLASS_HIDE),format.hasYear?(this.renderYears(),$yearsPicker.removeClass(CLASS_HIDE),this.place()):this.showView(VIEWS_DAYS);break;case VIEWS_MONTHS:$yearsPicker.addClass(CLASS_HIDE),$daysPicker.addClass(CLASS_HIDE),format.hasMonth?(this.renderMonths(),$monthsPicker.removeClass(CLASS_HIDE),this.place()):this.showView(VIEWS_YEARS);break;default:$yearsPicker.addClass(CLASS_HIDE),$monthsPicker.addClass(CLASS_HIDE),format.hasDay?(this.renderDays(),$daysPicker.removeClass(CLASS_HIDE),this.place()):this.showView(VIEWS_MONTHS)}}},{key:"hideView",value:function(){!this.inline&&this.options.autoHide&&this.hide()}},{key:"place",value:function(){if(!this.inline){var $this=this.$element,options=this.options,$picker=this.$picker,containerWidth=$(document).outerWidth(),containerHeight=$(document).outerHeight(),elementWidth=$this.outerWidth(),elementHeight=$this.outerHeight(),width=$picker.width(),height=$picker.height(),_$this$offset=$this.offset(),left=_$this$offset.left,top=_$this$offset.top,offset=parseFloat(options.offset),placement=CLASS_TOP_LEFT;isNaN(offset)&&(offset=10),top>height&&top+elementHeight+height>containerHeight?(top-=height+offset,placement=CLASS_BOTTOM_LEFT):top+=elementHeight+offset,left+width>containerWidth&&(left+=elementWidth-width,placement=placement.replace("left","right")),$picker.removeClass(CLASS_PLACEMENTS).addClass(placement).css({top:top,left:left})}}},{key:"trigger",value:function(type,data){var e=$.Event(type,data);return this.$element.trigger(e),e}},{key:"createItem",value:function(data){var options=this.options,itemTag=options.itemTag,item={text:"",view:"",muted:!1,picked:!1,disabled:!1,highlighted:!1},classes=[];return $.extend(item,data),item.muted&&classes.push(options.mutedClass),item.highlighted&&classes.push(options.highlightedClass),item.picked&&classes.push(options.pickedClass),item.disabled&&classes.push(options.disabledClass),"<".concat(itemTag,' class="').concat(classes.join(" "),'" data-view="').concat(item.view,'">').concat(item.text,"</").concat(itemTag,">")}},{key:"getValue",value:function(){var $this=this.$element;return this.isInput?$this.val():$this.text()}},{key:"setValue",value:function(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",$this=this.$element;this.isInput?$this.val(value):this.inline&&!this.options.container||$this.text(value)}}],staticProps=[{key:"setDefaults",value:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$.extend(DEFAULTS,LANGUAGES[options.language],$.isPlainObject(options)&&options)}}],protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Datepicker}();if($.extend&&$.extend(Datepicker.prototype,render,handlers,methods),$.fn){var AnotherDatepicker=$.fn.datepicker;$.fn.datepicker=function(option){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var result;return this.each((function(i,element){var $element=$(element),isDestroy="destroy"===option,datepicker=$element.data(NAMESPACE);if(!datepicker){if(isDestroy)return;var options=$.extend({},$element.data(),$.isPlainObject(option)&&option);datepicker=new Datepicker(element,options),$element.data(NAMESPACE,datepicker)}if(isString(option)){var fn=datepicker[option];$.isFunction(fn)&&(result=fn.apply(datepicker,args),isDestroy&&$element.removeData(NAMESPACE))}})),isUndefined(result)?this:result},$.fn.datepicker.Constructor=Datepicker,$.fn.datepicker.languages=LANGUAGES,$.fn.datepicker.setDefaults=Datepicker.setDefaults,$.fn.datepicker.noConflict=function(){return $.fn.datepicker=AnotherDatepicker,this}}})),function(a){"function"==typeof define&&define.amd?define(["../../../../templates/lifelong/js/jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}((function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(b="number"==typeof b?b:a,this.each((function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&((c=this.createTextRange()).collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())}))):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,g){var i,j,k,l,m,n,o;if(!c&&this.length>0){var p=a(this[0]).data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(""),(function(a,b){"?"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)})),this.trigger("unmask").each((function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function v(){A(),B.val()!=E&&B.change()}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(""))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join("")===D?(B.val()&&B.val(""),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(""),(function(a,b){return"?"!=a?i[a]?p(b):a:void 0})),D=C.join(""),E=B.val();B.data(a.mask.dataName,(function(){return a.map(C,(function(a,b){return j[b]&&a!=p(b)?a:null})).join("")})),B.one("unmask",(function(){B.off(".mask").removeData(a.mask.dataName)})).on("focus.mask",(function(){var a;B.prop("readonly")||(clearTimeout(b),E=B.val(),a=A(),b=setTimeout((function(){B.get(0)===document.activeElement&&(z(),a==c.replace("?","").length?B.caret(0,a):B.caret(a))}),10))})).on("blur.mask",v).on("keydown.mask",(function(a){if(!B.prop("readonly")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(c=(b=B.caret()).begin,(e=b.end)-c==0&&(c=46!==f?function(a){for(;--a>=0&&!j[a];);return a}(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}})).on("keypress.mask",(function(b){if(!B.prop("readonly")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!=0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(function(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}(c),C[c]=d,z(),e=q(c),f){setTimeout((function(){a.proxy(a.fn.caret,B,e)()}),0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}})).on("input.mask paste.mask",(function(){B.prop("readonly")||setTimeout((function(){var a=A(!0);B.caret(a),h()}),0)})),e&&f&&B.off("input.mask").on("input.mask",(function(){var a=B.val(),b=B.caret();if(o&&o.length&&o.length>a.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()})),A()}))}})})),jQuery(document).ready((function($){var firstSet=30,favoritesCount=0,viewed=[],hasSentUser=!1,hasSentCoord=!1;function submitSlide(item){"slide-12"===item.data("target")&&0===favoritesCount&&item.data("target","slide-15");var email,submit=!0;if(item.hasClass("validateName")&&0===$("#nameInput").val().length)$("#nameError").slideDown(200,"linear"),submit=!1;else if(item.hasClass("pregnant-question")){var pregnantField=$('input[name="currently_pregnant"]:checked');if(pregnantField.length>0)"yes"==pregnantField.val()?(item.data("target","slide-4a"),$("#pregnant-back").data("target","slide-4a")):(item.data("target","slide-4b"),$("#pregnant-back").data("target","slide-4b"));else $("#pregnantError").slideDown(200,"linear"),submit=!1}else if(item.hasClass("nearby-question")){0==$('input[name="nearby"]:checked').length&&($("#nearbyError").slideDown(200,"linear"),submit=!1)}else item.hasClass("due-question")&&""==$("#dueDate").val()?($("#dueError").slideDown(200,"linear"),submit=!1):item.hasClass("age-question")&&""==$("#childAge").val()?($("#ageError").slideDown(200,"linear"),submit=!1):item.hasClass("state-question")&&""==$("#stateInput").val()?($("#stateError").slideDown(200,"linear"),submit=!1):item.hasClass("race-question")&&""==$("#race").val()?($("#raceError").slideDown(200,"linear"),submit=!1):item.hasClass("race-father-question")&&""==$("#fathersRace").val()?($("#raceFatherError").slideDown(200,"linear"),submit=!1):item.hasClass("family-type-question")&&0===$('input[name="familyType[]"]:checked').length?($("#familyType").slideDown(200,"linear"),submit=!1):!item.hasClass("email-question")||0!==$("#emailInput").val().length&&(email=$("#emailInput").val(),/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email))?item.hasClass("name-question")&&0===$("#nameInput").val().length?($("#nameError").slideDown(200,"linear"),submit=!1):item.hasClass("communication-question")&&0===$('input[name="communication"]:checked').length?($("#communicationError").slideDown(200,"linear"),submit=!1):item.hasClass("communication-in-person-question")&&0===$('input[name="communicationInPerson"]:checked').length&&($("#communicationInPersonError").slideDown(200,"linear"),submit=!1):($("#emailError").slideDown(200,"linear"),submit=!1);if(submit){if(item.hasClass("validateName")){var firstNameOnly=$("#nameInput").val().replace(/ .*/,"");$(".userName").text($.sanitize(firstNameOnly))}var target=item.data("target");if(item.closest(".match-slide").removeClass("visible").addClass("prev"),$("#"+target).addClass("visible").removeClass("next"),item.data("target").includes("slide-p"))incrementView(item.data("target").replace("slide-p",""))}}function submitProfileSlide(item){"slide-12"===item.data("target")&&0===favoritesCount&&item.data("target","slide-15");var target=item.data("target");(item.closest(".family-profile").removeClass("visible").addClass("prev"),$("#"+target).addClass("visible").removeClass("next"),item.data("target").includes("slide-p"))&&incrementView(item.data("target").replace("slide-p",""))}function backProfileSlide(item){var target=item.data("target");item.closest(".family-profile").removeClass("visible").addClass("next"),$("#"+target).addClass("visible").removeClass("prev")}function saveFavorite(item,override){var originalTarget=item.data("target");null!==override&&item.data("target",override),$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"profiles.addFavorite",id:item.data("id")},dataType:"json",success:function(data){if(data.acted){!function(id){var task="match.incrementFavorite";$("body").hasClass("page-ppc-quiz")&&(task="ppc.incrementFavorite");$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:task,id:id},dataType:"json",success:function(data){},error:function(error){console.log(error)}})}(item.data("id"));var familiesPlural="Family";++favoritesCount>1&&(familiesPlural="Families"),$(".favorites-count").text(favoritesCount),$(".currentMatchCount").html("You Liked <strong>"+favoritesCount+"</strong> "+familiesPlural)}submitProfileSlide(item),item.data("target",originalTarget)},error:function(error){console.log(error),submitProfileSlide(item)}})}function cancelFavorite(item,override){var originalTarget=item.data("target");null!==override&&item.data("target",override),$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"profiles.delFavorite",id:item.data("id")},dataType:"json",success:function(data){if(data.acted){favoritesCount>0&&favoritesCount--;var familiesPlural="Family";favoritesCount>1&&(familiesPlural="Families"),$(".favorites-count").text(favoritesCount),$(".currentMatchCount").html("You Liked <strong>"+favoritesCount+"</strong> "+familiesPlural)}submitProfileSlide(item),item.data("target",originalTarget)},error:function(error){console.log(error),submitProfileSlide(item)}})}function incrementView(id){var task="match.incrementView";$("body").hasClass("page-ppc-quiz")&&(task="ppc.incrementView"),viewed.includes[id]||id.includes("a")||(viewed.push(id),$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:task,id:id},dataType:"json",success:function(data){},error:function(error){console.log(error)}}))}function incrementHits(matches){var task="match.incrementHits";$("body").hasClass("page-ppc-quiz")&&(task="ppc.incrementHits"),ids=[];for(var i=0;i<matches.length;i++)ids.push(matches[i].id);ids=ids.join(","),$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:task,ids:ids},dataType:"json",success:function(data){},error:function(error){console.log(error)}})}function updateProfiles(matches){for(var html="",firstEnd=-1,i=0;i<matches.length;i++){var nextSlide="slide-12",doneSlide="slide-12",prevSlide="";i>0&&(prevSlide="slide-p"+matches[i-1].id),i===firstSet-1&&matches.length>firstSet?(firstEnd=matches[i].id,nextSlide="slide-p"+matches[i+1].id,doneSlide="slide-p"+matches[i].id+"a",$("#continue-families").data("target","slide-p"+matches[i+1].id),$("#stop-families").data("target","slide-12")):i<matches.length-1&&(nextSlide="slide-p"+matches[i+1].id,doneSlide="slide-p"+matches[i].id+"a");var max=matches.length>firstSet?firstSet:matches.length;html+='<section id="slide-p'+matches[i].id+'" class="family-profile next">',html+='<div class="inner-content">',html+='<div class="match-count">Family <strong>'+(i+1)+"</strong> of <strong>"+max+"</strong></div>",html+="<h1>"+matches[i].family_name+"</h1>",html+='<div class="favorites-container">',""!=matches[i].main_image&&(html+='<img class="profile-image" src="'+matches[i].main_image+'" alt="'+matches[i].family_name+'">'),html+='<form class="addToFavorites">',html+='<div class="col-6">',html+='<button class="save-profile" data-id="'+matches[i].id+'" data-target="'+nextSlide+'"><div class="icon save"></div><div class="btn-text">I Like this Family!</div></button>',html+="</div>",html+='<div class="col-6">',html+='<button class="cancel-profile" data-id="'+matches[i].id+'" data-target="'+nextSlide+'"><div class="icon cancel"></div><div class="btn-text">See My Next Family</div></button>',html+="</div>",html+="</form>",html+="</div>",html+="<p>"+matches[i].description+"</p>",html+="</div>",html+="<div>",html+='<a class="submitChoices btn btn-light" href="javascript:void(0);" data-target="'+doneSlide+'">Finish Viewing Families</a>',""!=prevSlide&&(html+='<div><a class="goback back-profile" data-target="'+prevSlide+'" href="javascript:void(0);">Go back</a></div>'),html+='<div class="currentMatchCount"></div>',html+="</div>",html+="</section>",html+='<section id="slide-p'+matches[i].id+'a" class="family-profile next">',html+='<div class="inner-content constrained">',html+="<h1>Are you sure? There are more families you haven't viewed yet.</h1>",html+="</div>",html+='<button class="btn btn-primary confirmChoices" data-target="slide-12">Yes, Submit</button>',html+='<div><a href="javascript:void(0);" class="goback confirmChoicesBack" data-target="slide-p'+matches[i].id+'">Keep Looking</a></div>',html+="</section>"}$(".slides-container").append(html),$(".save-profile").on("click",(function(e){e.preventDefault(),firstEnd>=0&&$(this).data("id")==firstEnd?(firstEnd=-1,saveFavorite($(this),"slide-11")):saveFavorite($(this),null)})),$(".cancel-profile").on("click",(function(e){e.preventDefault(),firstEnd>=0&&$(this).data("id")==firstEnd?(firstEnd=-1,cancelFavorite($(this),"slide-11")):cancelFavorite($(this),null)})),$(".back-profile").on("click",(function(e){e.preventDefault(),backProfileSlide($(this))})),$(".submitChoices, .confirmChoices").on("click",(function(e){e.preventDefault(),submitProfileSlide($(this))})),$(".confirmChoicesBack").on("click",(function(e){e.preventDefault(),backProfileSlide($(this))})),$(".show-families").data("target","slide-p"+matches[0].id),$("#continue-families").on("click",(function(){$(".match-count").hide()}))}$.sanitize=function(input){return input.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<[\/\!]*?[^<>]*?>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,"")},$("#getStarted").on("click",(function(e){e.preventDefault(),$("body").removeClass("first-slide-bg")})),$("[data-target]").on("click",(function(e){e.preventDefault();var item=$(this);if(item.hasClass("family-type-question")&&0===$('input[name="familyType[]"]:checked').length)$("#familyType").slideDown(200,"linear");else if($(this).hasClass("get-families")){(loading=$("#loading-overlay")).show();var raceField=$("#race"),raceFatherField=$("#fathersRace"),familyTypeField=$('input[name="familyType[]"]:checked'),familyTypeValue="";familyTypeField.each((function(){""!==familyTypeValue&&(familyTypeValue+="-"),familyTypeValue+=$(this).val()}));var dueDateValue="",childAgeValue="";"yes"==(pregnantValue=(pregnantField=$('input[name="currently_pregnant"]:checked')).length>0?pregnantField.val():"")?dueDateValue=$("#dueDate").val():childAgeValue=$("#childAge").val();var stateField=$("#stateInput"),nearbyValue=(nearbyField=$('input[name="nearby"]:checked')).length>0?nearbyField.val():"";$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"match.getResults",race:raceField.val(),raceFather:raceFatherField.val(),familyType:familyTypeValue,dueDate:dueDateValue,childAge:childAgeValue,state:stateField.val(),nearby:nearbyValue},dataType:"json",success:function(data){1==data.matches.length?$(".families-count").text("1 family"):data.matches.length>firstSet?$(".families-count").text(firstSet+" families"):$(".families-count").text(data.matches.length+" families"),0===data.matches.length?item.data("target","slide-10a"):(updateProfiles(data.matches),incrementHits(data.matches)),$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"profiles.clearFavorites"},dataType:"json",success:function(data){loading.hide(),submitSlide(item)},error:function(error){console.log(error),loading.hide(),submitSlide(item)}})},error:function(error){console.log(error)}})}else{getppccase:if($(this).hasClass("get-families-ppc")){var loading,communicationValue=(communicationField=$('input[name="communication"]:checked')).length>0?communicationField.val():"",communicationInPersonValue=(communicationInPersonField=$('input[name="communicationInPerson"]:checked')).length>0?communicationInPersonField.val():"";if($(this).hasClass("communication-question")&&"yes"==communicationValue)break getppccase;return $(this).data("target","slide-10"),(loading=$("#loading-overlay")).show(),void $.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"ppc.getResults",communication:communicationValue,communicationInPerson:communicationInPersonValue},dataType:"json",success:function(data){console.log(data),1==data.matches.length?$(".families-count").text("1 family"):data.matches.length>firstSet?$(".families-count").text(firstSet+" families"):$(".families-count").text(data.matches.length+" families"),"no"===communicationValue?($(".adoption-a-an").text("a"),$(".adoption-type").text("Closed adoption")):"no"===communicationInPersonValue?($(".adoption-a-an").text("a"),$(".adoption-type").text("Semi-Open adoption")):($(".adoption-a-an").text("an"),$(".adoption-type").text("Open adoption")),0===data.matches.length?item.data("target","slide-10a"):(updateProfiles(data.matches),incrementHits(data.matches)),$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"profiles.clearFavorites"},dataType:"json",success:function(data){loading.hide(),submitSlide(item)},error:function(error){console.log(error),loading.hide(),submitSlide(item)}})},error:function(error){console.log(error)}})}sendusercase:if($(this).hasClass("senduser")){if(hasSentUser)break sendusercase;if(""!=(emailField=$("#emailInput")).val()){var nameField=$("#nameInput");$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"match.sendUser",name:nameField.val(),email:emailField.val()},dataType:"json",success:function(data){hasSentUser=!0,submitSlide(item)},error:function(error){console.log(error)}})}}sendcoordcase:if($(this).hasClass("sendcoord")){if(hasSentCoord)break sendcoordcase;if(""!=(emailField=$("#emailInput")).val()){nameField=$("#nameInput");var pregnantValue=(pregnantField=$('input[name="currently_pregnant"]:checked')).length>0?pregnantField.val():"",dueField=$("#dueDate"),ageField=$("#childAge");stateField=$("#stateInput"),raceField=$("#race"),raceFatherField=$("#fathersRace"),familyTypeField=$('input[name="familyType[]"]:checked'),familyTypeValue="";familyTypeField.each((function(){""!==familyTypeValue&&(familyTypeValue+="-"),familyTypeValue+=$(this).val()}));var phoneField=$("#phoneInput");nearbyValue=(nearbyField=$('input[name="nearby"]:checked')).length>0?nearbyField.val():"";$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"match.sendCoordinator",name:nameField.val(),pregnant:pregnantValue,due:dueField.val(),age:ageField.val(),state:stateField.val(),race:raceField.val(),raceFather:raceFatherField.val(),familyType:familyTypeValue,email:emailField.val(),phone:phoneField.val(),nearby:nearbyValue},dataType:"json",success:function(data){hasSentCoord=!0,submitSlide(item)},error:function(error){console.log(error)}})}}sendcrmcase:if($(this).hasClass("sendcrm")){false;nameField=$("#nameInput");var pregnantField,nearbyField,emailField=$("#emailInput");stateField=$("#stateInput"),raceField=$("#race"),raceFatherField=$("#fathersRace"),pregnantValue=(pregnantField=$('input[name="currently_pregnant"]:checked')).length>0?pregnantField.val():"",dueField=$("#dueDate"),ageField=$("#childAge"),nearbyValue=(nearbyField=$('input[name="nearby"]:checked')).length>0?nearbyField.val():"",familyTypeField=$('input[name="familyType[]"]:checked'),familyTypeValue="";familyTypeField.each((function(){""!==familyTypeValue&&(familyTypeValue+="-"),familyTypeValue+=$(this).val()}));phoneField=$("#phoneInput");$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"match.submitToZoho",name:nameField.val(),email:emailField.val(),state:stateField.val(),race:raceField.val(),raceFather:raceFatherField.val(),pregnant:pregnantValue,due:dueField.val(),age:ageField.val(),nearby:nearbyValue,familyType:familyTypeValue,email:emailField.val(),phone:phoneField.val(),nearby:nearbyValue},dataType:"json",success:function(data){console.log(data)},error:function(error){console.log(error)}})}senduserppccase:if($(this).hasClass("senduserPPC")){if(hasSentUser)break senduserppccase;communicationValue=(communicationField=$('input[name="communication"]:checked')).length>0?communicationField.val():"",communicationInPersonValue=(communicationInPersonField=$('input[name="communicationInPerson"]:checked')).length>0?communicationInPersonField.val():"";if(""!=(emailField=$("#emailInput")).val()){nameField=$("#nameInput");$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"ppc.sendUser",name:nameField.val(),email:emailField.val(),communication:communicationValue,communicationInPerson:communicationInPersonValue},dataType:"json",success:function(data){hasSentUser=!0,submitSlide(item)},error:function(error){console.log(error)}})}}sendcoordppccase:if($(this).hasClass("sendcoordPPC")){if(hasSentCoord)break sendcoordppccase;communicationValue=(communicationField=$('input[name="communication"]:checked')).length>0?communicationField.val():"",communicationInPersonValue=(communicationInPersonField=$('input[name="communicationInPerson"]:checked')).length>0?communicationInPersonField.val():"";if(""!=(emailField=$("#emailInput")).val()){nameField=$("#nameInput"),phoneField=$("#phoneInput");$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"ppc.sendCoordinator",email:emailField.val(),name:nameField.val(),phone:phoneField.val(),communication:communicationValue,communicationInPerson:communicationInPersonValue},dataType:"json",success:function(data){hasSentCoord=!0,submitSlide(item)},error:function(error){console.log(error)}})}}sendcrmppccase:if($(this).hasClass("sendcrmPPC")){false;var communicationField,communicationInPersonField;communicationValue=(communicationField=$('input[name="communication"]:checked')).length>0?communicationField.val():"",communicationInPersonValue=(communicationInPersonField=$('input[name="communicationInPerson"]:checked')).length>0?communicationInPersonField.val():"",emailField=$("#emailInput"),nameField=$("#nameInput"),phoneField=$("#phoneInput");$.ajax({url:"/index.php",type:"GET",data:{option:"com_profiles",task:"ppc.submitToZoho",email:emailField.val(),name:nameField.val(),phone:phoneField.val(),communication:communicationValue,communicationInPerson:communicationInPersonValue},dataType:"json",success:function(data){console.log(data)},error:function(error){console.log(error)}})}if($(this).hasClass("goback-link"))return"reload"==$(this).data("target")?("yes"===$(this).data("confirm")?confirm("Are you sure you want to start over?")&&location.reload():location.reload(),!1):void function(item){var target=item.data("target");item.closest(".match-slide").removeClass("visible").addClass("next"),$("#"+target).addClass("visible").removeClass("prev")}(item);submitSlide(item)}})),$(".sumo").SumoSelect({floatWidth:0}),$('[data-toggle="datepicker"]').datepicker({autoHide:!0}),$(".phone-mask").mask("999-999-9999")}));